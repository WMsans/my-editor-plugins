<!DOCTYPE html>
<html lang="en-us">
<head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Slope</title>
    
    <link rel="stylesheet" href="TemplateData/style.css">
    
    <script src="TemplateData/UnityProgress.js"></script>
    <script src="TemplateData/unityloader41.js"></script>
    
    <script>
        // Initialize Game
        var gameInstance = UnityLoader.instantiate("gameContainer", "Build/slope.json", { 
            onProgress: UnityProgress, 
            Module: { 
                onRuntimeInitialized: function() { 
                    UnityProgress(gameInstance, "complete") 
                } 
            } 
        });

        // --- Theme Sync ---
        function syncTheme() {
            try {
                const p = window.parent.document.documentElement;
                const s = window.parent.getComputedStyle(p);
                // Sync background color
                document.documentElement.style.setProperty('--bg-layer', s.getPropertyValue('--bg-secondary'));
            } catch(e) {
                console.warn("Theme sync failed");
            }
        }
        // Run once and when requested
        syncTheme();
        window.addEventListener('message', (e) => {
             if (e.data && e.data.channel === 'theme:changed') syncTheme();
        });
    </script>
    
    <style>
        :root {
            --bg-layer: #181825; /* Fallback */
        }
        body { margin: 0; overflow: hidden; background: var(--bg-layer); }
        .webgl-content {
            width: 100%;
            height: 100vh; /* Full height of the block */
            display: flex;
            align-items: center;
            justify-content: center;
        }
    </style>
</head>

<body>
    <div class="webgl-content">
        <div id="gameContainer" style="width: 100%; height: 100%; margin: 0;"></div>
    </div>
</body>
</html>